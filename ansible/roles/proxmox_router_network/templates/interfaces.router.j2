# This file is managed by Ansible (role: proxmox_router_network)
# Do not edit manually.

auto lo
iface lo inet loopback

######## EMERGENCY / SAFETY INTERFACE (DHCP) ########
{% if pve_enable_emergency_iface %}
auto {{ pve_emergency_iface }}
iface {{ pve_emergency_iface }} inet dhcp
{% endif %}

######## WAN physical interface ########
auto {{ pve_wan_iface }}
iface {{ pve_wan_iface }} inet manual

auto {{ proxmox_wan_bridge }}
iface {{ proxmox_wan_bridge }} inet manual
    bridge-ports {{ pve_wan_iface }}
    bridge-stp off
    bridge-fd 0

######## LAN trunk physical interface ########
auto {{ pve_lan_iface }}
iface {{ pve_lan_iface }} inet manual

auto {{ proxmox_lan_bridge }}
iface {{ proxmox_lan_bridge }} inet static
    address {{ pve_mgmt_address }}
    netmask {{ pve_mgmt_netmask }}
{% if not pve_bootstrap_gateway_on_emergency | default(false) %}
    gateway {{ pve_mgmt_gateway }}
{% else %}
    # gateway {{ pve_mgmt_gateway }}
{% endif %}
    bridge-ports {{ pve_lan_iface }}
    bridge-stp off
    bridge-fd 0
    bridge-vlan-aware yes
    bridge-vids {{ pve_lan_vlans | join(' ') }}

######## EMERGENCY / SAFETY INTERFACE (DHCP) ########
{% if pve_enable_emergency_iface %}
auto {{ pve_emergency_iface }}
iface {{ pve_emergency_iface }} inet dhcp
{% endif %}
